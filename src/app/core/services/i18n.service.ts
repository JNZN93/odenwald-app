import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';

export interface Translation {
  [key: string]: string;
}

export interface Translations {
  [language: string]: Translation;
}

@Injectable({
  providedIn: 'root'
})
export class I18nService {
  private currentLanguageSubject = new BehaviorSubject<string>('de');
  public currentLanguage$ = this.currentLanguageSubject.asObservable();

  private translations: Translations = {
    de: {
      // Navigation
      'nav.overview': 'Übersicht',
      'nav.orders': 'Bestellungen',
      'nav.issues': 'Reklamationen',
      'nav.support': 'Support',
      'nav.tables': 'Tische',
      'nav.drivers': 'Fahrer',
      'nav.menu': 'Speisekarte',
      'nav.flyer': 'Flyer Generator',
      'nav.details': 'Details',
      'nav.analytics': 'Analytics',
      'nav.customers': 'Kunden',
      'nav.settings': 'Einstellungen',
      'nav.wholesale': 'Großhandel Einkauf',

      // Descriptions
      'desc.overview': 'Dashboard und Statistiken',
      'desc.orders': 'Bestellungen verwalten',
      'desc.issues': 'Zugewiesene Kundenreklamationen',
      'desc.support': 'Support-Tickets an Admin-Team',
      'desc.tables': 'Tischverwaltung & Tischangebote',
      'desc.drivers': 'Fahrer verwalten & zuweisen',
      'desc.menu': 'Menu bearbeiten',
      'desc.flyer': 'DIN A4 Flyer erstellen',
      'desc.details': 'Restaurant-Details für Kunden',
      'desc.analytics': 'Berichte & Statistiken',
      'desc.customers': 'Kunden verwalten',
      'desc.settings': 'Restaurant-Einstellungen',
      'desc.wholesale': 'Zutaten und Waren bestellen',

      // Stats
      'stats.orders_today': 'Heutige Bestellungen',
      'stats.revenue_today': 'Umsatz heute',
      'stats.avg_order_value': 'Ø Bestellwert',
      'stats.orders_week': 'Bestellungen diese Woche',
      'stats.no_data': 'Keine Daten verfügbar',
      'stats.vs_yesterday': 'vs gestern',
      'stats.vs_last_week': 'vs letzte Woche',

      // Common
      'common.loading': 'Lädt...',
      'common.error': 'Fehler',
      'common.save': 'Speichern',
      'common.cancel': 'Abbrechen',
      'common.delete': 'Löschen',
      'common.edit': 'Bearbeiten',
      'common.add': 'Hinzufügen',
      'common.search': 'Suchen',
      'common.filter': 'Filter',
      'common.reset': 'Zurücksetzen',
      'common.confirm': 'Bestätigen',
      'common.yes': 'Ja',
      'common.no': 'Nein',
      'common.refresh': 'Aktualisieren',

      // Error messages
      'error.restaurants_load': 'Restaurants konnten nicht geladen werden',
      'error.stats_load': 'Restaurant-Statistiken konnten nicht geladen werden',
      'error.orders_load': 'Bestellungen konnten nicht geladen werden',
      'error.menu_load': 'Speisekarte konnte nicht geladen werden',
      'error.customers_load': 'Kunden konnten nicht geladen werden',
      'error.drivers_load': 'Fahrer konnten nicht geladen werden',
      'error.issues_load': 'Reklamationen konnten nicht geladen werden',
      'error.settings_save': 'Einstellungen konnten nicht gespeichert werden',

      // Orders
      'orders.pending': 'Ausstehende Bestellungen',
      'orders.in_progress': 'In Bearbeitung',
      'orders.completed': 'Abgeschlossen',
      'orders.cancelled': 'Storniert',
      'orders.order_id': 'Bestellnummer',
      'orders.total_amount': 'Gesamtbetrag',
      'orders.order_time': 'Bestellzeit',
      'orders.delivery_time': 'Lieferzeit',
      'orders.accept': 'Annehmen',
      'orders.reject': 'Ablehnen',
      'orders.mark_ready': 'Als bereit markieren',
      'orders.mark_delivered': 'Als geliefert markieren',
      'orders.view_details': 'Details anzeigen',

      // Menu
      'menu.title': 'Speisekarte',
      'menu.add_item': 'Gericht hinzufügen',
      'menu.edit_item': 'Gericht bearbeiten',
      'menu.delete_item': 'Gericht löschen',
      'menu.item_name': 'Gerichtname',
      'menu.price': 'Preis',
      'menu.category': 'Kategorie',
      'menu.save': 'Speichern',
      'menu.cancel': 'Abbrechen',
      'menu.confirm_delete': 'Gericht wirklich löschen?',

      // Customers
      'customers.title': 'Kunden',
      'customers.name': 'Name',
      'customers.email': 'E-Mail',
      'customers.phone': 'Telefon',
      'customers.total_orders': 'Bestellungen',
      'customers.last_order': 'Letzte Bestellung',
      'customers.loyalty_points': 'Treuepunkte',
      'customers.view_profile': 'Profil anzeigen',

      // Drivers
      'drivers.title': 'Fahrer',
      'drivers.name': 'Name',
      'drivers.phone': 'Telefon',
      'drivers.status': 'Status',
      'drivers.available': 'Verfügbar',
      'drivers.busy': 'Beschäftigt',
      'drivers.offline': 'Offline',
      'drivers.current_delivery': 'Aktuelle Lieferung',
      'drivers.assign': 'Zuweisen',
      'drivers.unassign': 'Zuweisung aufheben',

      // Issues
      'issues.title': 'Reklamationen',
      'issues.open': 'Offen',
      'issues.in_progress': 'In Bearbeitung',
      'issues.resolved': 'Gelöst',
      'issues.issue_id': 'Reklamationsnummer',
      'issues.order_id': 'Bestellnummer',
      'issues.customer': 'Kunde',
      'issues.description': 'Beschreibung',
      'issues.priority': 'Priorität',
      'issues.high': 'Hoch',
      'issues.medium': 'Mittel',
      'issues.low': 'Niedrig',
      'issues.assign_to_me': 'Mir zuweisen',
      'issues.resolve': 'Lösen',

      // Settings
      'settings.restaurant_info': 'Restaurant-Informationen',
      'settings.opening_hours': 'Öffnungszeiten',
      'settings.delivery_area': 'Liefergebiet',
      'settings.payment_methods': 'Zahlungsmethoden',
      'settings.notifications': 'Benachrichtigungen',
      'settings.stripe_setup': 'Stripe-Einrichtung',
      'settings.restaurant_name': 'Restaurant-Name',
      'settings.address': 'Adresse',
      'settings.phone': 'Telefon',
      'settings.email': 'E-Mail',
      'settings.opening_hours_monday': 'Montag',
      'settings.opening_hours_tuesday': 'Dienstag',
      'settings.opening_hours_wednesday': 'Mittwoch',
      'settings.opening_hours_thursday': 'Donnerstag',
      'settings.opening_hours_friday': 'Freitag',
      'settings.opening_hours_saturday': 'Samstag',
      'settings.opening_hours_sunday': 'Sonntag',
      'settings.open': 'Geöffnet',
      'settings.closed': 'Geschlossen',

      // Analytics
      'analytics.title': 'Analytics',
      'analytics.overview': 'Übersicht',
      'analytics.revenue': 'Umsatz',
      'analytics.orders': 'Bestellungen',
      'analytics.customers': 'Kunden',
      'analytics.popular_items': 'Beliebte Gerichte',
      'analytics.today': 'Heute',
      'analytics.this_week': 'Diese Woche',
      'analytics.this_month': 'Diesen Monat',
      'analytics.last_month': 'Letzten Monat',

      // Wholesale
      'wholesale.title': 'Großhandel Einkauf',
      'wholesale.products': 'Produkte',
      'wholesale.orders': 'Bestellungen',
      'wholesale.suppliers': 'Lieferanten',
      'wholesale.add_to_cart': 'In Warenkorb',
      'wholesale.quantity': 'Menge',
      'wholesale.unit_price': 'Stückpreis',
      'wholesale.total_price': 'Gesamtpreis',
      'wholesale.checkout': 'Zur Kasse',
      'wholesale.order_history': 'Bestellhistorie',

      // Support
      'support.title': 'Support',
      'support.create_ticket': 'Ticket erstellen',
      'support.subject': 'Betreff',
      'support.message': 'Nachricht',
      'support.priority': 'Priorität',
      'support.submit': 'Absenden',
      'support.tickets': 'Tickets',
      'support.status': 'Status',
      'support.created': 'Erstellt',
      'support.updated': 'Aktualisiert',

      // Tables
      'tables.title': 'Tische',
      'tables.add_table': 'Tisch hinzufügen',
      'tables.table_number': 'Tischnummer',
      'tables.capacity': 'Kapazität',
      'tables.status': 'Status',
      'tables.available': 'Verfügbar',
      'tables.occupied': 'Besetzt',
      'tables.reserved': 'Reserviert',
      'tables.qr_code': 'QR-Code',

      // Details
      'details.title': 'Restaurant-Details',
      'details.basic_info': 'Grundinformationen',
      'details.contact_info': 'Kontaktinformationen',
      'details.opening_hours': 'Öffnungszeiten',
      'details.delivery_info': 'Lieferinformationen',
      'details.minimum_order': 'Mindestbestellwert',
      'details.delivery_fee': 'Liefergebühr',
      'details.delivery_time': 'Lieferzeit',

      // Payment Methods
      'payment.title': 'Zahlungsmethoden',
      'payment.cash': 'Barzahlung',
      'payment.card': 'Kartenzahlung',
      'payment.online': 'Online-Zahlung',
      'payment.stripe_connected': 'Stripe verbunden',
      'payment.stripe_not_connected': 'Stripe nicht verbunden',
      'payment.connect_stripe': 'Stripe verbinden',

      // Invoices
      'invoices.title': 'Rechnungen',
      'invoices.download': 'Herunterladen',
      'invoices.view': 'Anzeigen',
      'invoices.invoice_number': 'Rechnungsnummer',
      'invoices.date': 'Datum',
      'invoices.amount': 'Betrag',
      'invoices.status': 'Status',
      'invoices.paid': 'Bezahlt',
      'invoices.pending': 'Ausstehend',

      // Language names
      'lang.german': 'Deutsch',
      'lang.turkish': 'Türkçe',

      // Overview
      'overview.welcome_back': 'Willkommen zurück!',
      'overview.restaurant_status': 'Hier ist der aktuelle Status deines Restaurants',
      'overview.orders_today': 'Bestellungen heute',
      'overview.revenue_today': 'Umsatz heute',
      'overview.pending_orders': 'Ausstehende Bestellungen',
      'overview.average_rating': 'Durchschnittliche Bewertung',
      'overview.recent_orders': 'Letzte Bestellungen',
      'overview.view_all': 'Alle anzeigen',
      'overview.unknown_customer': 'Unbekannter Kunde',
      'overview.paid': 'Bezahlt',
      'overview.payment_pending': 'Zahlung ausstehend',
      'overview.no_orders': 'Keine Bestellungen vorhanden',
      'overview.popular_items': 'Beliebteste Gerichte',
      'overview.edit_menu': 'Menu bearbeiten',
      'overview.orders': 'Bestellungen',
      'overview.no_data': 'Keine Daten verfügbar',
      'overview.quick_actions': 'Schnellaktionen',
      'overview.add_new_dish': 'Neues Gericht hinzufügen',
      'overview.manage_orders': 'Bestellungen verwalten',
      'overview.view_reports': 'Berichte anzeigen',
      'overview.settings': 'Einstellungen',
      'overview.loading_data': 'Daten werden geladen...',
      'overview.reviews': 'Bewertungen',
      'overview.unknown': 'Unbekannt',
      'overview.invalid': 'Ungültig',
      'overview.minutes_ago': 'vor',
      'overview.hours_ago': 'vor',

      // Order status
      'order.status.pending': 'Ausstehend',
      'order.status.confirmed': 'Bestätigt',
      'order.status.preparing': 'Wird zubereitet',
      'order.status.ready': 'Bereit zur Abholung',
      'order.status.picked_up': 'Abgeholt',
      'order.status.delivered': 'Geliefert',
      'order.status.served': 'Serviert',
      'order.status.paid': 'Bezahlt',
      'order.status.cancelled': 'Storniert',

      // Menu management
      'menu.manage_menu': 'Speisekarte verwalten',
      
      // Orders management
      'orders.title': 'Bestellungen verwalten',
      'orders.manage_description': 'Verwalten Sie alle eingehenden Bestellungen',
      'orders.status': 'Status',
      'orders.all_status': 'Alle Status',
      'orders.payment_pending': 'Zahlung ausstehend',
      'orders.ready_pickup': 'Bereit zur Abholung',
      'orders.fully_completed': 'Vollständig abgeschlossen',
      'orders.search_placeholder': 'Kunde, Bestellnummer...',
      'orders.sort_by': 'Sortieren nach',
      'orders.newest_first': 'Neueste zuerst',
      'orders.oldest_first': 'Älteste zuerst',
      'orders.highest_amount': 'Höchster Betrag',
      'orders.lowest_amount': 'Niedrigster Betrag',
      'orders.orders_found': 'Bestellungen gefunden',
      'orders.completed_orders_found': 'abgeschlossene Bestellungen gefunden',
      'orders.order': 'Bestellung',
      'orders.customer': 'Kunde',
      'orders.order_status': 'Bestellstatus',
      'orders.payment': 'Zahlung',
      'orders.total': 'Gesamt',
      'orders.type': 'Typ',
      'orders.address': 'Adresse',
      'orders.actions': 'Aktionen',
      'orders.details': 'Details',
      'orders.paid': 'Bezahlt',
      'orders.almost_ready_payment_missing': 'Fast fertig - Zahlung fehlt',
      'orders.items': 'Artikel',
      'orders.no_address': 'Keine Adresse',
      'orders.confirm': 'Bestätigen',
      'orders.prepare': 'Zubereiten',
      'orders.ready': 'Fertig',
      'orders.picked_up': 'Abgeholt',
      'orders.delivered': 'Geliefert',
      'orders.delivery_fee': 'Liefergebühr',
      'orders.no_notes_add': 'Keine Notizen vorhanden. Klicken Sie auf das Plus-Symbol, um Notizen hinzuzufügen.',
      'orders.additional_notes': 'Zusätzliche Hinweise zur Bestellung',
      
      // Order status tabs
      'orders.tabs.all': 'Alle',
      'orders.tabs.urgent': 'Sofort bearbeiten',
      'orders.tabs.preparing': 'In Zubereitung',
      'orders.tabs.ready': 'Bereit',
      'orders.tabs.delivery': 'Lieferungen',
      'orders.tabs.pickup': 'Abholungen',
      'orders.tabs.dine_in': 'Tischangebote',
      'orders.tabs.completed': 'Abgeschlossen',
      
      // Order type values
      'orders.type.dine_in': 'Vor Ort',
      'orders.type.delivery': 'Lieferung',
      'orders.type.pickup': 'Abholung',
      'orders.type.unknown': 'Unbekannt',
      'orders.notes_placeholder': 'Fügen Sie hier zusätzliche Hinweise hinzu...',
      'orders.cancelled_by_manager': 'Storniert durch Restaurant-Manager',
      'orders.confirm_cancel': 'Sind Sie sicher, dass Sie diese Bestellung stornieren möchten?',
      'orders.order_cancelled': 'Bestellung storniert',
      'orders.order_cancelled_success': 'Die Bestellung wurde erfolgreich storniert',
      'orders.cancel_failed': 'Stornierung fehlgeschlagen',
      'orders.cancel_error': 'Fehler beim Stornieren der Bestellung',
      'orders.confirm_mark_paid': 'Sind Sie sicher, dass Sie diese Bestellung als bezahlt markieren möchten?',
      'orders.payment_confirmed': 'Zahlung bestätigt',
      'orders.order_marked_paid': 'Die Bestellung wurde als bezahlt markiert',
      'orders.payment_confirm': 'Zahlung bestätigen',
      'orders.payment_update_error': 'Fehler beim Aktualisieren des Zahlungsstatus',
      'orders.invalid_date': 'Ungültiges Datum',
      'orders.unknown': 'Unbekannt',
      'orders.cancel_editing': 'Bearbeitung abbrechen',
      'orders.edit_notes': 'Notizen bearbeiten',
      'orders.add_notes': 'Notizen hinzufügen',
      'orders.update': 'Aktualisieren',
      'orders.add': 'Hinzufügen',
      'orders.notes_warning': 'Notizen können nur einmal hinzugefügt werden. Stellen Sie sicher, dass alle wichtigen Informationen enthalten sind.',
      
      // Settings
      'settings.title': 'Restaurant-Einstellungen',
      'settings.description': 'Verwalten Sie die Einstellungen Ihres Restaurants',
      'settings.loading_data': 'Restaurant-Daten werden geladen...',
      'settings.tab.general': 'Allgemein',
      'settings.tab.images': 'Bilder',
      'settings.tab.hours': 'Öffnungszeiten',
      'settings.tab.delivery': 'Lieferung',
      'settings.tab.notifications': 'Benachrichtigungen',
      'settings.tab.payment': 'Zahlung',
      'settings.tab.loyalty': 'Stempelkarten',
      'settings.tab.stripe': 'Stripe Connect',
      'settings.tab.password': 'Passwort',
      'settings.day.monday': 'Montag',
      'settings.day.tuesday': 'Dienstag',
      'settings.day.wednesday': 'Mittwoch',
      'settings.day.thursday': 'Donnerstag',
      'settings.day.friday': 'Freitag',
      'settings.day.saturday': 'Samstag',
      'settings.day.sunday': 'Sonntag',
      
      // Additional Settings
      'settings.gallery_description': 'Fügen Sie bis zu 10 Bilder Ihrer Speisen, Ihres Restaurants oder Ihrer Atmosphäre hinzu.',
      
      // Flyer Generator
      'flyer.paper_format': 'Papierformat wählen',
      'flyer.template_choose': 'Flyer-Vorlage wählen',
      'flyer.products_select': 'Produkte auswählen',
      'flyer.street_placeholder': 'Straße, PLZ Ort',
      'flyer.specialties_placeholder': 'z.B. Unsere Spezialitäten',
      'flyer.products_selected': 'Produkt ausgewählt',
      'flyer.products_selected_plural': 'Produkte ausgewählt',
      'flyer.specialties_title': 'Unsere Spezialitäten',
      'flyer.visit_message': 'Besuchen Sie uns für eine unvergessliche kulinarische Erfahrung!',
      'flyer.grid_description': 'Produkte in einem übersichtlichen Raster angeordnet',
      'flyer.large_description': 'Produkte groß und prominent dargestellt',
      'flyer.custom_description': 'Eigene Maße',
      'flyer.popup_blocker_pdf': 'Pop-up-Blocker verhindert das Öffnen des PDF-Fensters. Bitte erlauben Sie Pop-ups für diese Seite.',
      'flyer.popup_blocker_print': 'Pop-up-Blocker verhindert das Öffnen des Druckfensters. Bitte erlauben Sie Pop-ups für diese Seite.',
      'flyer.html2canvas_needed': 'Für die Bildfunktion wird html2canvas benötigt. Bitte verwenden Sie stattdessen die Druckfunktion und wählen Sie "Als PDF speichern".',
      
      // Settings Additional
      'settings.prepare_apply': 'Übernehmen vorbereiten',
      'settings.apply_configuration': 'Konfiguration übernehmen',
      'settings.configure_zones': 'Passen Sie Gebühren und Einstellungen für jede Zone an',
      'settings.delivery_fee': 'Liefergebühr (€)',
      'settings.exclude_areas': 'Bestimmte PLZ oder Ortsteile von der Lieferung ausschließen',
      'settings.add_area': 'Bereich hinzufügen',
      'settings.excluded_areas_info': 'Diese Bereiche werden bei der Restaurant-Suche für Kunden nicht angezeigt.',
      'settings.browser_notifications': 'Browser-Benachrichtigungen für neue Bestellungen',
      'settings.daily_summary': 'Tägliche Zusammenfassung',
      'settings.daily_summary_description': 'Tägliche Umsatz- und Bestellzusammenfassung',
      'settings.stripe_info': 'Die Zahlungsabwicklung erfolgt über Stripe. Konfiguration im Admin-Bereich verfügbar.',
      'settings.orders_for_discount': 'Bestellungen für Rabatt',
      'settings.min_cart_for_stamps': 'Mindestwarenkorb für Stempel (€)',
      'settings.details_submitted': 'Details übermittelt',
      'settings.hours_saved_success': 'Öffnungszeiten wurden gespeichert',
      'settings.hours_saved_error': 'Öffnungszeiten konnten nicht gespeichert werden',
      'settings.restaurant_closed': 'Restaurant wurde geschlossen',
      'settings.restaurant_opened': 'Restaurant wurde geöffnet',
      'settings.status_change_error': 'Status konnte nicht geändert werden',
      'settings.check_status': 'Status prüfen',
      'settings.check_onboarding_status': 'Onboarding-Status prüfen',
      
      
      
      // Issues
      'issues.resolve_complaint': 'Reklamation lösen',
      'issues.solution_proposal': 'Lösungsvorschlag',
      'issues.money_back': 'Geld zurück',
      'issues.full_partial_refund': 'Vollständige oder teilweise Rückerstattung',
      'menu.unavailable': 'Nicht verfügbar',
      'menu.vegetarian': 'Vegetarisch',
      'menu.vegan': 'Vegan',
      'menu.gluten_free': 'Glutenfrei',
      'menu.edit': 'Bearbeiten',
      'menu.deactivate': 'Deaktivieren',
      'menu.activate': 'Aktivieren',
      'menu.no_dishes_in_category': 'Keine Gerichte in dieser Kategorie',
      'menu.deactivated_dishes': 'Deaktivierte Gerichte',
      'menu.dishes': 'Gerichte',
      'menu.dish': 'Gericht',
      'menu.deactivated': 'Deaktiviert',
      'menu.restore': 'Wiederherstellen',
      'menu.edit_dish': 'Gericht bearbeiten',
      'menu.add_new_dish': 'Neues Gericht hinzufügen',
      'menu.basic_data': 'Grunddaten',
      'menu.variants': 'Varianten',
      'menu.name': 'Name',
      'menu.price_eur': 'Preis (€)',
      'menu.prep_time_min': 'Zubereitungszeit (Min.)',
      'menu.category_optional': 'Kategorie (optional)',
      'menu.no_category': 'Ohne Kategorie',
      'menu.image_url': 'Bild-URL',
      'menu.upload_file': 'Datei hochladen',
      'menu.enter_image_url': 'Geben Sie eine URL zu einem Bild ein',
      'menu.select_image': 'Bild auswählen',
      'menu.allergens_comma_separated': 'Allergene (kommagetrennt)',
      'menu.edit_category': 'Kategorie bearbeiten',
      'menu.confirm_deactivate': 'Sind Sie sicher, dass Sie',
      'menu.confirm_activate': 'Sind Sie sicher, dass Sie',
      'menu.confirm_delete_category': 'Sind Sie sicher, dass Sie die Kategorie',
      'menu.dish_deactivated_successfully': 'Gericht wurde erfolgreich deaktiviert.',
      'menu.dish_activated_successfully': 'Gericht wurde erfolgreich wieder aktiviert.',
      'menu.dish_updated_successfully': 'Gericht wurde erfolgreich aktualisiert!',
      'menu.dish_added_successfully': 'Gericht wurde erfolgreich hinzugefügt!',
      'menu.error_deactivating_dish': 'Fehler beim Deaktivieren des Gerichts. Bitte versuchen Sie es erneut.',
      'menu.error_restoring_dish': 'Fehler beim Wiederherstellen des Gerichts. Bitte versuchen Sie es erneut.',
      'menu.error_changing_availability': 'Fehler beim Ändern der Verfügbarkeit. Bitte versuchen Sie es erneut.',
      'menu.error_updating_dish': 'Fehler beim Aktualisieren des Gerichts. Bitte versuchen Sie es erneut.',
      'menu.error_adding_dish': 'Fehler beim Hinzufügen des Gerichts. Bitte versuchen Sie es erneut.',
      'menu.error_no_restaurant': 'Fehler: Kein Restaurant gefunden.',
      'menu.error_file_too_large': 'Datei ist zu groß. Maximale Größe ist 3MB.',
      'menu.error_invalid_file_type': 'Ungültiger Dateityp. Erlaubt: JPEG, PNG, GIF, WebP.',
      'menu.image_uploaded_successfully': 'Bild erfolgreich hochgeladen!',
      'menu.error_uploading_image': 'Fehler beim Hochladen des Bildes. Bitte versuchen Sie es erneut.',
      'menu.image_selected_upload_after_save': 'Bild ausgewählt. Es wird nach dem Speichern des Gerichts hochgeladen.',
      'menu.image_removed_successfully': 'Bild erfolgreich entfernt.',
      'menu.error_removing_image': 'Fehler beim Entfernen des Bildes.'
    },
    tr: {
      // Navigation
      'nav.overview': 'Genel Bakış',
      'nav.orders': 'Siparişler',
      'nav.issues': 'Şikayetler',
      'nav.support': 'Destek',
      'nav.tables': 'Masalar',
      'nav.drivers': 'Sürücüler',
      'nav.menu': 'Menü',
      'nav.flyer': 'Flyer Oluşturucu',
      'nav.details': 'Detaylar',
      'nav.analytics': 'Analitik',
      'nav.customers': 'Müşteriler',
      'nav.settings': 'Ayarlar',
      'nav.wholesale': 'Toptan Alışveriş',

      // Descriptions
      'desc.overview': 'Dashboard ve İstatistikler',
      'desc.orders': 'Siparişleri yönet',
      'desc.issues': 'Atanan müşteri şikayetleri',
      'desc.support': 'Admin ekibine destek biletleri',
      'desc.tables': 'Masa yönetimi ve masa teklifleri',
      'desc.drivers': 'Sürücüleri yönet ve ata',
      'desc.menu': 'Menüyü düzenle',
      'desc.flyer': 'DIN A4 Flyer oluştur',
      'desc.details': 'Müşteriler için restoran detayları',
      'desc.analytics': 'Raporlar ve İstatistikler',
      'desc.customers': 'Müşterileri yönet',
      'desc.settings': 'Restoran ayarları',
      'desc.wholesale': 'Malzeme ve ürün sipariş et',

      // Stats
      'stats.orders_today': 'Bugünkü Siparişler',
      'stats.revenue_today': 'Bugünkü Gelir',
      'stats.avg_order_value': 'Ortalama Sipariş Değeri',
      'stats.orders_week': 'Bu Haftaki Siparişler',
      'stats.no_data': 'Veri mevcut değil',
      'stats.vs_yesterday': 'dün ile karşılaştırıldığında',
      'stats.vs_last_week': 'geçen hafta ile karşılaştırıldığında',

      // Common
      'common.loading': 'Yükleniyor...',
      'common.error': 'Hata',
      'common.save': 'Kaydet',
      'common.cancel': 'İptal',
      'common.delete': 'Sil',
      'common.edit': 'Düzenle',
      'common.add': 'Ekle',
      'common.search': 'Ara',
      'common.filter': 'Filtre',
      'common.reset': 'Sıfırla',
      'common.confirm': 'Onayla',
      'common.yes': 'Evet',
      'common.no': 'Hayır',
      'common.refresh': 'Yenile',

      // Error messages
      'error.restaurants_load': 'Restoranlar yüklenemedi',
      'error.stats_load': 'Restoran istatistikleri yüklenemedi',
      'error.orders_load': 'Siparişler yüklenemedi',
      'error.menu_load': 'Menü yüklenemedi',
      'error.customers_load': 'Müşteriler yüklenemedi',
      'error.drivers_load': 'Sürücüler yüklenemedi',
      'error.issues_load': 'Şikayetler yüklenemedi',
      'error.settings_save': 'Ayarlar kaydedilemedi',

      // Orders
      'orders.pending': 'Bekleyen Siparişler',
      'orders.in_progress': 'İşlemde',
      'orders.completed': 'Tamamlandı',
      'orders.cancelled': 'İptal Edildi',
      'orders.order_id': 'Sipariş Numarası',
      'orders.total_amount': 'Toplam Tutar',
      'orders.order_time': 'Sipariş Zamanı',
      'orders.delivery_time': 'Teslimat Zamanı',
      'orders.accept': 'Kabul Et',
      'orders.reject': 'Reddet',
      'orders.mark_ready': 'Hazır Olarak İşaretle',
      'orders.mark_delivered': 'Teslim Edildi Olarak İşaretle',
      'orders.view_details': 'Detayları Görüntüle',

      // Menu
      'menu.title': 'Menü',
      'menu.add_item': 'Yemek Ekle',
      'menu.edit_item': 'Yemek Düzenle',
      'menu.delete_item': 'Yemek Sil',
      'menu.item_name': 'Yemek Adı',
      'menu.price': 'Fiyat',
      'menu.category': 'Kategori',
      'menu.save': 'Kaydet',
      'menu.cancel': 'İptal',
      'menu.confirm_delete': 'Yemeği gerçekten silmek istiyor musunuz?',

      // Customers
      'customers.title': 'Müşteriler',
      'customers.name': 'Ad',
      'customers.email': 'E-posta',
      'customers.phone': 'Telefon',
      'customers.total_orders': 'Siparişler',
      'customers.last_order': 'Son Sipariş',
      'customers.loyalty_points': 'Sadakat Puanları',
      'customers.view_profile': 'Profili Görüntüle',

      // Drivers
      'drivers.title': 'Sürücüler',
      'drivers.name': 'Ad',
      'drivers.phone': 'Telefon',
      'drivers.status': 'Durum',
      'drivers.available': 'Mevcut',
      'drivers.busy': 'Meşgul',
      'drivers.offline': 'Çevrimdışı',
      'drivers.current_delivery': 'Mevcut Teslimat',
      'drivers.assign': 'Ata',
      'drivers.unassign': 'Atamayı Kaldır',

      // Issues
      'issues.title': 'Şikayetler',
      'issues.open': 'Açık',
      'issues.in_progress': 'İşlemde',
      'issues.resolved': 'Çözüldü',
      'issues.issue_id': 'Şikayet Numarası',
      'issues.order_id': 'Sipariş Numarası',
      'issues.customer': 'Müşteri',
      'issues.description': 'Açıklama',
      'issues.priority': 'Öncelik',
      'issues.high': 'Yüksek',
      'issues.medium': 'Orta',
      'issues.low': 'Düşük',
      'issues.assign_to_me': 'Bana Ata',
      'issues.resolve': 'Çöz',

      // Settings
      'settings.restaurant_info': 'Restoran Bilgileri',
      'settings.opening_hours': 'Çalışma Saatleri',
      'settings.delivery_area': 'Teslimat Alanı',
      'settings.payment_methods': 'Ödeme Yöntemleri',
      'settings.notifications': 'Bildirimler',
      'settings.stripe_setup': 'Stripe Kurulumu',
      'settings.restaurant_name': 'Restoran Adı',
      'settings.address': 'Adres',
      'settings.phone': 'Telefon',
      'settings.email': 'E-posta',
      'settings.opening_hours_monday': 'Pazartesi',
      'settings.opening_hours_tuesday': 'Salı',
      'settings.opening_hours_wednesday': 'Çarşamba',
      'settings.opening_hours_thursday': 'Perşembe',
      'settings.opening_hours_friday': 'Cuma',
      'settings.opening_hours_saturday': 'Cumartesi',
      'settings.opening_hours_sunday': 'Pazar',
      'settings.open': 'Açık',
      'settings.closed': 'Kapalı',

      // Analytics
      'analytics.title': 'Analitik',
      'analytics.overview': 'Genel Bakış',
      'analytics.revenue': 'Gelir',
      'analytics.orders': 'Siparişler',
      'analytics.customers': 'Müşteriler',
      'analytics.popular_items': 'Popüler Yemekler',
      'analytics.today': 'Bugün',
      'analytics.this_week': 'Bu Hafta',
      'analytics.this_month': 'Bu Ay',
      'analytics.last_month': 'Geçen Ay',

      // Wholesale
      'wholesale.title': 'Toptan Alışveriş',
      'wholesale.products': 'Ürünler',
      'wholesale.orders': 'Siparişler',
      'wholesale.suppliers': 'Tedarikçiler',
      'wholesale.add_to_cart': 'Sepete Ekle',
      'wholesale.quantity': 'Miktar',
      'wholesale.unit_price': 'Birim Fiyat',
      'wholesale.total_price': 'Toplam Fiyat',
      'wholesale.checkout': 'Ödeme',
      'wholesale.order_history': 'Sipariş Geçmişi',

      // Support
      'support.title': 'Destek',
      'support.create_ticket': 'Bilet Oluştur',
      'support.subject': 'Konu',
      'support.message': 'Mesaj',
      'support.priority': 'Öncelik',
      'support.submit': 'Gönder',
      'support.tickets': 'Biletler',
      'support.status': 'Durum',
      'support.created': 'Oluşturuldu',
      'support.updated': 'Güncellendi',

      // Tables
      'tables.title': 'Masalar',
      'tables.add_table': 'Masa Ekle',
      'tables.table_number': 'Masa Numarası',
      'tables.capacity': 'Kapasite',
      'tables.status': 'Durum',
      'tables.available': 'Mevcut',
      'tables.occupied': 'Dolu',
      'tables.reserved': 'Rezerve',
      'tables.qr_code': 'QR Kod',

      // Details
      'details.title': 'Restoran Detayları',
      'details.basic_info': 'Temel Bilgiler',
      'details.contact_info': 'İletişim Bilgileri',
      'details.opening_hours': 'Çalışma Saatleri',
      'details.delivery_info': 'Teslimat Bilgileri',
      'details.minimum_order': 'Minimum Sipariş',
      'details.delivery_fee': 'Teslimat Ücreti',
      'details.delivery_time': 'Teslimat Süresi',

      // Payment Methods
      'payment.title': 'Ödeme Yöntemleri',
      'payment.cash': 'Nakit Ödeme',
      'payment.card': 'Kart Ödemesi',
      'payment.online': 'Online Ödeme',
      'payment.stripe_connected': 'Stripe Bağlı',
      'payment.stripe_not_connected': 'Stripe Bağlı Değil',
      'payment.connect_stripe': 'Stripe Bağla',

      // Invoices
      'invoices.title': 'Faturalar',
      'invoices.download': 'İndir',
      'invoices.view': 'Görüntüle',
      'invoices.invoice_number': 'Fatura Numarası',
      'invoices.date': 'Tarih',
      'invoices.amount': 'Tutar',
      'invoices.status': 'Durum',
      'invoices.paid': 'Ödendi',
      'invoices.pending': 'Beklemede',

      // Language names
      'lang.german': 'Deutsch',
      'lang.turkish': 'Türkçe',

      // Overview
      'overview.welcome_back': 'Tekrar hoş geldiniz!',
      'overview.restaurant_status': 'İşte restoranınızın mevcut durumu',
      'overview.orders_today': 'Bugünkü siparişler',
      'overview.revenue_today': 'Bugünkü gelir',
      'overview.pending_orders': 'Bekleyen siparişler',
      'overview.average_rating': 'Ortalama değerlendirme',
      'overview.recent_orders': 'Son siparişler',
      'overview.view_all': 'Tümünü görüntüle',
      'overview.unknown_customer': 'Bilinmeyen müşteri',
      'overview.paid': 'Ödendi',
      'overview.payment_pending': 'Ödeme bekleniyor',
      'overview.no_orders': 'Sipariş bulunmuyor',
      'overview.popular_items': 'Popüler yemekler',
      'overview.edit_menu': 'Menüyü düzenle',
      'overview.orders': 'Siparişler',
      'overview.no_data': 'Veri mevcut değil',
      'overview.quick_actions': 'Hızlı işlemler',
      'overview.add_new_dish': 'Yeni yemek ekle',
      'overview.manage_orders': 'Siparişleri yönet',
      'overview.view_reports': 'Raporları görüntüle',
      'overview.settings': 'Ayarlar',
      'overview.loading_data': 'Veriler yükleniyor...',
      'overview.reviews': 'Değerlendirmeler',
      'overview.unknown': 'Bilinmiyor',
      'overview.invalid': 'Geçersiz',
      'overview.minutes_ago': 'dakika önce',
      'overview.hours_ago': 'saat önce',

      // Order status
      'order.status.pending': 'Beklemede',
      'order.status.confirmed': 'Onaylandı',
      'order.status.preparing': 'Hazırlanıyor',
      'order.status.ready': 'Teslim için hazır',
      'order.status.picked_up': 'Alındı',
      'order.status.delivered': 'Teslim edildi',
      'order.status.served': 'Servis edildi',
      'order.status.paid': 'Ödendi',
      'order.status.cancelled': 'İptal edildi',

      // Menu management
      'menu.manage_menu': 'Menüyü yönet',
      
      // Orders management
      'orders.title': 'Siparişleri yönet',
      'orders.manage_description': 'Gelen tüm siparişleri yönetin',
      'orders.status': 'Durum',
      'orders.all_status': 'Tüm Durumlar',
      'orders.payment_pending': 'Ödeme bekleniyor',
      'orders.ready_pickup': 'Teslim almaya hazır',
      'orders.fully_completed': 'Tamamen tamamlandı',
      'orders.search_placeholder': 'Müşteri, sipariş numarası...',
      'orders.sort_by': 'Sırala',
      'orders.newest_first': 'En yeniler önce',
      'orders.oldest_first': 'En eskiler önce',
      'orders.highest_amount': 'En yüksek tutar',
      'orders.lowest_amount': 'En düşük tutar',
      'orders.orders_found': 'sipariş bulundu',
      'orders.completed_orders_found': 'tamamlanmış sipariş bulundu',
      'orders.order': 'Sipariş',
      'orders.customer': 'Müşteri',
      'orders.order_status': 'Sipariş durumu',
      'orders.payment': 'Ödeme',
      'orders.total': 'Toplam',
      'orders.type': 'Tür',
      'orders.address': 'Adres',
      'orders.details': 'Detaylar',
      'orders.paid': 'Ödendi',
      'orders.almost_ready_payment_missing': 'Neredeyse hazır - ödeme eksik',
      'orders.items': 'Ürün',
      'orders.no_address': 'Adres yok',
      'orders.confirm': 'Onayla',
      'orders.prepare': 'Hazırla',
      'orders.ready': 'Hazır',
      'orders.picked_up': 'Alındı',
      'orders.delivered': 'Teslim edildi',
      'orders.delivery_fee': 'Teslimat ücreti',
      'orders.no_notes_add': 'Not yok. Not eklemek için artı simgesine tıklayın.',
      'orders.additional_notes': 'Sipariş için ek notlar',
      
      // Order status tabs
      'orders.tabs.all': 'Tümü',
      'orders.tabs.urgent': 'Hemen işle',
      'orders.tabs.preparing': 'Hazırlanıyor',
      'orders.tabs.ready': 'Hazır',
      'orders.tabs.delivery': 'Teslimatlar',
      'orders.tabs.pickup': 'Alımlar',
      'orders.tabs.dine_in': 'Masa Teklifleri',
      'orders.tabs.completed': 'Tamamlandı',
      
      // Order type values
      'orders.type.dine_in': 'Yerinde',
      'orders.type.delivery': 'Teslimat',
      'orders.type.pickup': 'Alım',
      'orders.type.unknown': 'Bilinmiyor',
      'orders.notes_placeholder': 'Buraya ek notlar ekleyin...',
      'orders.cancelled_by_manager': 'Restoran yöneticisi tarafından iptal edildi',
      'orders.confirm_cancel': 'Bu siparişi iptal etmek istediğinizden emin misiniz?',
      'orders.order_cancelled': 'Sipariş iptal edildi',
      'orders.order_cancelled_success': 'Sipariş başarıyla iptal edildi',
      'orders.cancel_failed': 'İptal başarısız',
      'orders.cancel_error': 'Sipariş iptal edilirken hata oluştu',
      'orders.confirm_mark_paid': 'Bu siparişi ödenmiş olarak işaretlemek istediğinizden emin misiniz?',
      'orders.payment_confirmed': 'Ödeme onaylandı',
      'orders.order_marked_paid': 'Sipariş ödenmiş olarak işaretlendi',
      'orders.payment_confirm': 'Ödeme onayla',
      'orders.payment_update_error': 'Ödeme durumu güncellenirken hata oluştu',
      'orders.invalid_date': 'Geçersiz tarih',
      'orders.unknown': 'Bilinmiyor',
      'orders.cancel_editing': 'Düzenlemeyi iptal et',
      'orders.edit_notes': 'Notları düzenle',
      'orders.add_notes': 'Not ekle',
      'orders.update': 'Güncelle',
      'orders.add': 'Ekle',
      'orders.notes_warning': 'Notlar sadece bir kez eklenebilir. Tüm önemli bilgilerin dahil olduğundan emin olun.',
      
      // Settings
      'settings.title': 'Restoran Ayarları',
      'settings.description': 'Restoranınızın ayarlarını yönetin',
      'settings.loading_data': 'Restoran verileri yükleniyor...',
      'settings.tab.general': 'Genel',
      'settings.tab.images': 'Resimler',
      'settings.tab.hours': 'Çalışma Saatleri',
      'settings.tab.delivery': 'Teslimat',
      'settings.tab.notifications': 'Bildirimler',
      'settings.tab.payment': 'Ödeme',
      'settings.tab.loyalty': 'Pul Kartları',
      'settings.tab.stripe': 'Stripe Connect',
      'settings.tab.password': 'Şifre',
      'settings.day.monday': 'Pazartesi',
      'settings.day.tuesday': 'Salı',
      'settings.day.wednesday': 'Çarşamba',
      'settings.day.thursday': 'Perşembe',
      'settings.day.friday': 'Cuma',
      'settings.day.saturday': 'Cumartesi',
      'settings.day.sunday': 'Pazar',
      
      // Additional Settings
      'settings.gallery_description': 'Yemeklerinizin, restoranınızın veya atmosferinizin 10\'a kadar resmini ekleyin.',
      
      // Flyer Generator
      'flyer.paper_format': 'Kağıt formatı seçin',
      'flyer.template_choose': 'Flyer şablonu seçin',
      'flyer.products_select': 'Ürünleri seçin',
      'flyer.street_placeholder': 'Sokak, Posta kodu Şehir',
      'flyer.specialties_placeholder': 'örn. Özel yemeklerimiz',
      'flyer.products_selected': 'Ürün seçildi',
      'flyer.products_selected_plural': 'Ürün seçildi',
      'flyer.specialties_title': 'Özel yemeklerimiz',
      'flyer.visit_message': 'Unutulmaz bir kulinarik deneyim için bizi ziyaret edin!',
      'flyer.grid_description': 'Ürünler düzenli bir ızgarada düzenlenmiş',
      'flyer.large_description': 'Ürünler büyük ve öne çıkan şekilde gösterilmiş',
      'flyer.custom_description': 'Özel boyutlar',
      'flyer.popup_blocker_pdf': 'Pop-up engelleyici PDF penceresinin açılmasını engelliyor. Lütfen bu sayfa için pop-up\'lara izin verin.',
      'flyer.popup_blocker_print': 'Pop-up engelleyici yazdırma penceresinin açılmasını engelliyor. Lütfen bu sayfa için pop-up\'lara izin verin.',
      'flyer.html2canvas_needed': 'Resim işlevi için html2canvas gereklidir. Lütfen bunun yerine yazdırma işlevini kullanın ve "PDF olarak kaydet" seçeneğini seçin.',
      
      // Settings Additional
      'settings.prepare_apply': 'Uygulamaya hazırla',
      'settings.apply_configuration': 'Konfigürasyonu uygula',
      'settings.configure_zones': 'Her bölge için ücret ve ayarları özelleştirin',
      'settings.delivery_fee': 'Teslimat ücreti (€)',
      'settings.exclude_areas': 'Belirli posta kodlarını veya mahalleleri teslimattan hariç tut',
      'settings.add_area': 'Alan ekle',
      'settings.excluded_areas_info': 'Bu alanlar, restoran aramasında müşterilere gösterilmez.',
      'settings.browser_notifications': 'Yeni siparişler için tarayıcı bildirimleri',
      'settings.daily_summary': 'Günlük Özet',
      'settings.daily_summary_description': 'Günlük satış ve sipariş özeti',
      'settings.stripe_info': 'Ödeme işlemleri Stripe üzerinden yapılır. Yönetici panelinde yapılandırma mevcuttur.',
      'settings.orders_for_discount': 'İndirim için siparişler',
      'settings.min_cart_for_stamps': 'Pul için minimum sepet tutarı (€)',
      'settings.details_submitted': 'Detaylar gönderildi',
      'settings.hours_saved_success': 'Çalışma saatleri kaydedildi',
      'settings.hours_saved_error': 'Çalışma saatleri kaydedilemedi',
      'settings.restaurant_closed': 'Restoran kapatıldı',
      'settings.restaurant_opened': 'Restoran açıldı',
      'settings.status_change_error': 'Durum değiştirilemedi',
      'settings.check_status': 'Durumu kontrol et',
      'settings.check_onboarding_status': 'Onboarding durumunu kontrol et',
      
      'menu.unavailable': 'Mevcut değil',
      'menu.vegetarian': 'Vejetaryen',
      'menu.vegan': 'Vegan',
      'menu.gluten_free': 'Glutensiz',
      'menu.edit': 'Düzenle',
      'menu.deactivate': 'Deaktif et',
      'menu.activate': 'Aktif et',
      'menu.no_dishes_in_category': 'Bu kategoride yemek bulunmuyor',
      'menu.deactivated_dishes': 'Deaktif edilmiş yemekler',
      'menu.dishes': 'Yemekler',
      'menu.dish': 'Yemek',
      'menu.deactivated': 'Deaktif edildi',
      'menu.restore': 'Geri yükle',
      'menu.edit_dish': 'Yemeği düzenle',
      'menu.add_new_dish': 'Yeni yemek ekle',
      'menu.basic_data': 'Temel veriler',
      'menu.variants': 'Varyantlar',
      'menu.name': 'Ad',
      'menu.price_eur': 'Fiyat (€)',
      'menu.prep_time_min': 'Hazırlık süresi (Dak.)',
      'menu.category_optional': 'Kategori (isteğe bağlı)',
      'menu.no_category': 'Kategori yok',
      'menu.image_url': 'Resim URL',
      'menu.enter_image_url': 'Bir resim URL\'si girin',
      'menu.select_image': 'Resim seç',
      'menu.allergens_comma_separated': 'Alerjenler (virgülle ayrılmış)',
      'menu.edit_category': 'Kategoriyi düzenle',
      'menu.confirm_deactivate': 'Emin misiniz ki',
      'menu.confirm_activate': 'Emin misiniz ki',
      'menu.confirm_delete_category': 'Emin misiniz ki kategoriyi',
      'menu.dish_deactivated_successfully': 'Yemek başarıyla deaktif edildi.',
      'menu.dish_activated_successfully': 'Yemek başarıyla aktif edildi.',
      'menu.dish_updated_successfully': 'Yemek başarıyla güncellendi!',
      'menu.dish_added_successfully': 'Yemek başarıyla eklendi!',
      'menu.error_deactivating_dish': 'Yemeği deaktif ederken hata oluştu. Lütfen tekrar deneyin.',
      'menu.error_restoring_dish': 'Yemeği geri yüklerken hata oluştu. Lütfen tekrar deneyin.',
      'menu.error_changing_availability': 'Mevcutluluğu değiştirirken hata oluştu. Lütfen tekrar deneyin.',
      'menu.error_updating_dish': 'Yemeği güncellerken hata oluştu. Lütfen tekrar deneyin.',
      'menu.error_adding_dish': 'Yemek eklerken hata oluştu. Lütfen tekrar deneyin.',
      'menu.error_no_restaurant': 'Hata: Restoran bulunamadı.',
      'menu.error_file_too_large': 'Dosya çok büyük. Maksimum boyut 3MB.',
      'menu.error_invalid_file_type': 'Geçersiz dosya türü. İzin verilen: JPEG, PNG, GIF, WebP.',
      'menu.image_uploaded_successfully': 'Resim başarıyla yüklendi!',
      'menu.error_uploading_image': 'Resim yüklenirken hata oluştu. Lütfen tekrar deneyin.',
      'menu.image_selected_upload_after_save': 'Resim seçildi. Yemek kaydedildikten sonra yüklenecek.',
      'menu.image_removed_successfully': 'Resim başarıyla kaldırıldı.',
      'menu.error_removing_image': 'Resmi kaldırırken hata oluştu.'
    }
  };

  constructor() {
    // Load language from localStorage or default to German
    const savedLanguage = localStorage.getItem('selectedLanguage') || 'de';
    this.setLanguage(savedLanguage);
  }

  getCurrentLanguage(): string {
    return this.currentLanguageSubject.value;
  }

  setLanguage(language: string): void {
    if (this.translations[language]) {
      this.currentLanguageSubject.next(language);
      localStorage.setItem('selectedLanguage', language);
    }
  }

  translate(key: string, params?: { [key: string]: string | number }): string {
    const currentLang = this.getCurrentLanguage();
    const translation = this.translations[currentLang]?.[key] || this.translations['de']?.[key] || key;

    if (params) {
      return this.interpolate(translation, params);
    }

    return translation;
  }

  private interpolate(template: string, params: { [key: string]: string | number }): string {
    return template.replace(/\{\{(\w+)\}\}/g, (match, key) => {
      return params[key]?.toString() || match;
    });
  }

  getAvailableLanguages(): { code: string; name: string }[] {
    return [
      { code: 'de', name: this.translate('lang.german') },
      { code: 'tr', name: this.translate('lang.turkish') }
    ];
  }
}
